{% load wagtailadmin_tags %}

<div class="{{ classname }}" data-article-content-block style="border: 3px solid #ff6600; padding: 1rem; background: #db5f07ff;">
    <div style="background: linear-gradient(135deg, #ff6600 0%, #ff9933 100%); color: white; padding: 0.5rem 1rem; margin: -1rem -1rem 1rem -1rem; font-weight: bold; font-size: 0.9rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        üé® CUSTOM FORM TEMPLATE: ArticleContentBlock (Nested StructBlock)
    </div>

    {% if help_text %}
        <span>
            <div class="help">
                {% icon name="help" classname="default" %}
                {{ help_text }}
            </div>
        </span>
    {% endif %}

    <div data-block-settings style="background: #d67610ff; padding: 1rem; border-radius: 4px; margin-bottom: 1rem; border-left: 4px solid #ff6600;">
        <div style="color: white; font-weight: bold; margin-bottom: 0.5rem; font-size: 0.85rem;">
            ‚öôÔ∏è Settings (Rendered First - Custom Position)
        </div>
        {% for child in settings.values %}
            <div class="w-field" data-field data-contentpath="{{ child.block.name }}">
                {% if child.block.label %}
                    <label class="w-field__label" {% if child.id_for_label %}for="{{ child.id_for_label }}"{% endif %}>{{ child.block.label }}{% if child.block.required %}<span class="w-required-mark">*</span>{% endif %}</label>
                {% endif %}
                {{ child.render_form }}
            </div>
        {% endfor %}
    </div>

    <div style="background: #bc6b15ff; padding: 1rem; border-radius: 4px;">
        <div style="color: white; font-weight: bold; margin-bottom: 0.5rem; font-size: 0.85rem;">
            üìù Main Content Fields
        </div>
        {% for child in children.values %}
            <div class="w-field" data-field data-contentpath="{{ child.block.name }}">
                {% if child.block.label %}
                    <label class="w-field__label" {% if child.id_for_label %}for="{{ child.id_for_label }}"{% endif %}>{{ child.block.label }}{% if child.block.required %}<span class="w-required-mark">*</span>{% endif %}</label>
                {% endif %}
                {{ child.render_form }}
            </div>
        {% endfor %}
    </div>
</div>
